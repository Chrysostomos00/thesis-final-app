{"ast":null,"code":"import axios from 'axios';\nconst api = axios.create({\n  baseURL: '/api' // Uses the proxy in development (setupProxy.js)\n});\n\n// Interceptor to add the JWT token to requests\napi.interceptors.request.use(config => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  // console.log(`Axios Request: ${config.method?.toUpperCase()} ${config.baseURL}${config.url}`, config.data); // Log data for POST/PUT\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Interceptor to handle API errors globally\napi.interceptors.response.use(response => response, error => {\n  var _error$response, _error$config, _error$config$method, _error$config2, _error$response2, _error$response3;\n  console.error(`Axios Error: Status ${(_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status} for ${(_error$config = error.config) === null || _error$config === void 0 ? void 0 : (_error$config$method = _error$config.method) === null || _error$config$method === void 0 ? void 0 : _error$config$method.toUpperCase()} ${(_error$config2 = error.config) === null || _error$config2 === void 0 ? void 0 : _error$config2.url}`, ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data) || error.message);\n  if (error.response && error.response.status === 401) {\n    console.error(\"Unauthorized access - 401 detected by interceptor. Token might be invalid or user session expired.\");\n    // Future: Consider triggering a global logout action via context or event emitter\n    // For example, by calling a function like: AuthContext.handleUnauthorized();\n    // This would prevent needing to handle navigation from multiple places.\n  }\n  if (error.code === 'ECONNREFUSED') {\n    console.error(\"Axios Interceptor: Connection Refused. The backend server is likely down or the proxy is misconfigured.\");\n  } else if (((_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.status) === 504) {\n    console.error(\"Axios Interceptor: Gateway Timeout. The proxy connected, but the backend server did not respond in time.\");\n  }\n  return Promise.reject(error); // Important to re-throw the error so components can catch it\n});\n\n// --- Auth Service Functions ---\nexport const registerUser = (email, password, role = 'student') => api.post('/register', {\n  email,\n  password,\n  role\n});\nexport const loginUser = (email, password) => api.post('/login', {\n  email,\n  password\n});\nexport const fetchUserInfo = () => api.get('/user');\n\n// --- Teacher Material Service Functions ---\nexport const uploadMaterial = formData => api.post('/upload', formData, {\n  headers: {\n    'Content-Type': 'multipart/form-data'\n  }\n});\nexport const getMaterials = () => api.get('/materials');\nexport const deleteMaterial = materialId => api.delete(`/materials/${materialId}`);\n\n// --- Teacher Prompt Service Functions ---\nexport const savePrompt = promptData => api.post('/prompts', promptData);\nexport const getTeacherPrompts = () => api.get('/prompts');\nexport const getPromptDetails = promptId => api.get(`/prompts/${promptId}`);\nexport const updatePrompt = (promptId, promptData) => api.put(`/prompts/${promptId}`, promptData);\nexport const deletePrompt = promptId => api.delete(`/prompts/${promptId}`);\n\n// --- Teacher AI Sandbox Function (MODIFIED) ---\nexport const generateTestResponse = payload => api.post('/generate', payload); // Now accepts a single payload object\n\n// --- Teacher Quiz Generation Function ---\nexport const generateQuizQuestionsAI = data => {\n  // data = { material_id?, context_text?, num_questions, difficulty }\n  // Axios POST expects data as the second argument, and config (with headers) as the third.\n  return api.post('/generate/quiz', data, {\n    headers: {\n      'Content-Type': 'application/json'\n    }\n  });\n};\n// --- Teacher Quiz Management Functions ---\nexport const createTeacherQuiz = quizData => api.post('/quizzes', quizData);\nexport const getTeacherQuizzes = () => api.get('/quizzes');\nexport const getTeacherQuizDetails = quizId => api.get(`/quizzes/${quizId}`);\nexport const updateTeacherQuiz = (quizId, quizData) => api.put(`/quizzes/${quizId}`, quizData);\nexport const deleteTeacherQuiz = quizId => api.delete(`/quizzes/${quizId}`);\nexport const getTeacherQuizAttempts = quizId => api.get(`/teachers/quizzes/${quizId}/attempts`);\n\n// --- Student Prompt/Assistant Functions ---\nexport const getStudentPrompts = () => api.get('/student/prompts');\nexport const askAssistant = (prompt_id, question) => api.post('/student/ask', {\n  prompt_id,\n  question\n});\n\n// --- Student Quiz Functions ---\nexport const getStudentQuizzes = () => api.get('/student/quizzes');\nexport const takeStudentQuiz = quizId => api.get(`/student/quizzes/${quizId}/take`);\nexport const submitStudentQuiz = (quizId, answers) => api.post(`/student/quizzes/${quizId}/submit`, {\n  answers\n});\nexport const getStudentAttemptDetails = attemptId => api.get(`/student/attempts/${attemptId}`);\nexport default api; // Keep default export if some parts of your app might use it","map":{"version":3,"names":["axios","api","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","error","Promise","reject","response","_error$response","_error$config","_error$config$method","_error$config2","_error$response2","_error$response3","console","status","method","toUpperCase","url","data","message","code","registerUser","email","password","role","post","loginUser","fetchUserInfo","get","uploadMaterial","formData","getMaterials","deleteMaterial","materialId","delete","savePrompt","promptData","getTeacherPrompts","getPromptDetails","promptId","updatePrompt","put","deletePrompt","generateTestResponse","payload","generateQuizQuestionsAI","createTeacherQuiz","quizData","getTeacherQuizzes","getTeacherQuizDetails","quizId","updateTeacherQuiz","deleteTeacherQuiz","getTeacherQuizAttempts","getStudentPrompts","askAssistant","prompt_id","question","getStudentQuizzes","takeStudentQuiz","submitStudentQuiz","answers","getStudentAttemptDetails","attemptId"],"sources":["/Users/tommys/Desktop/ai14/frontend/src/services/api.js"],"sourcesContent":["import axios from 'axios';\n\nconst api = axios.create({\n  baseURL: '/api', // Uses the proxy in development (setupProxy.js)\n});\n\n// Interceptor to add the JWT token to requests\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      config.headers.Authorization = `Bearer ${token}`;\n    }\n    // console.log(`Axios Request: ${config.method?.toUpperCase()} ${config.baseURL}${config.url}`, config.data); // Log data for POST/PUT\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\n// Interceptor to handle API errors globally\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    console.error(\n        `Axios Error: Status ${error.response?.status} for ${error.config?.method?.toUpperCase()} ${error.config?.url}`,\n        error.response?.data || error.message\n    );\n    if (error.response && error.response.status === 401) {\n      console.error(\"Unauthorized access - 401 detected by interceptor. Token might be invalid or user session expired.\");\n      // Future: Consider triggering a global logout action via context or event emitter\n      // For example, by calling a function like: AuthContext.handleUnauthorized();\n      // This would prevent needing to handle navigation from multiple places.\n    }\n     if (error.code === 'ECONNREFUSED') {\n        console.error(\"Axios Interceptor: Connection Refused. The backend server is likely down or the proxy is misconfigured.\");\n     } else if (error.response?.status === 504) {\n        console.error(\"Axios Interceptor: Gateway Timeout. The proxy connected, but the backend server did not respond in time.\");\n     }\n    return Promise.reject(error); // Important to re-throw the error so components can catch it\n  }\n);\n\n\n// --- Auth Service Functions ---\nexport const registerUser = (email, password, role = 'student') => api.post('/register', { email, password, role });\nexport const loginUser = (email, password) => api.post('/login', { email, password });\nexport const fetchUserInfo = () => api.get('/user');\n\n// --- Teacher Material Service Functions ---\nexport const uploadMaterial = (formData) => api.post('/upload', formData, { headers: { 'Content-Type': 'multipart/form-data' } });\nexport const getMaterials = () => api.get('/materials');\nexport const deleteMaterial = (materialId) => api.delete(`/materials/${materialId}`);\n\n// --- Teacher Prompt Service Functions ---\nexport const savePrompt = (promptData) => api.post('/prompts', promptData);\nexport const getTeacherPrompts = () => api.get('/prompts');\nexport const getPromptDetails = (promptId) => api.get(`/prompts/${promptId}`);\nexport const updatePrompt = (promptId, promptData) => api.put(`/prompts/${promptId}`, promptData);\nexport const deletePrompt = (promptId) => api.delete(`/prompts/${promptId}`);\n\n// --- Teacher AI Sandbox Function (MODIFIED) ---\nexport const generateTestResponse = (payload) => api.post('/generate', payload); // Now accepts a single payload object\n\n// --- Teacher Quiz Generation Function ---\nexport const generateQuizQuestionsAI = (data) => { // data = { material_id?, context_text?, num_questions, difficulty }\n    // Axios POST expects data as the second argument, and config (with headers) as the third.\n    return api.post('/generate/quiz', data, {\n        headers: {\n            'Content-Type': 'application/json'\n        }\n    });\n}\n// --- Teacher Quiz Management Functions ---\nexport const createTeacherQuiz = (quizData) => api.post('/quizzes', quizData);\nexport const getTeacherQuizzes = () => api.get('/quizzes');\nexport const getTeacherQuizDetails = (quizId) => api.get(`/quizzes/${quizId}`);\nexport const updateTeacherQuiz = (quizId, quizData) => api.put(`/quizzes/${quizId}`, quizData);\nexport const deleteTeacherQuiz = (quizId) => api.delete(`/quizzes/${quizId}`);\nexport const getTeacherQuizAttempts = (quizId) => api.get(`/teachers/quizzes/${quizId}/attempts`);\n\n// --- Student Prompt/Assistant Functions ---\nexport const getStudentPrompts = () => api.get('/student/prompts');\nexport const askAssistant = (prompt_id, question) => api.post('/student/ask', { prompt_id, question });\n\n// --- Student Quiz Functions ---\nexport const getStudentQuizzes = () => api.get('/student/quizzes');\nexport const takeStudentQuiz = (quizId) => api.get(`/student/quizzes/${quizId}/take`);\nexport const submitStudentQuiz = (quizId, answers) => api.post(`/student/quizzes/${quizId}/submit`, { answers });\nexport const getStudentAttemptDetails = (attemptId) => api.get(`/student/attempts/${attemptId}`);\n\n\nexport default api; // Keep default export if some parts of your app might use it"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}