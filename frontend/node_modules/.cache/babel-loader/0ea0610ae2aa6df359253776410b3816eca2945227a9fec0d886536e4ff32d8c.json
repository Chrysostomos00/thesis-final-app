{"ast":null,"code":"var _jsxFileName = \"/Users/tommys/Desktop/ai14/frontend/src/components/Dashboard/PromptBuilder/SortableBlock.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport { FaGripVertical, FaTrash, FaEdit, FaCheck, FaTimes } from 'react-icons/fa'; // Icons\nimport { BlockTypes } from '../PromptWorkshop'; // Import BlockTypes\nimport '../../../styles/PromptWorkshop.css'; // Ensure CSS is created/updated\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction SortableBlock({\n  id,\n  block,\n  onDeleteBlock,\n  onUpdateBlockContent,\n  isDragging,\n  isOpacityReduced\n}) {\n  _s();\n  const [isEditing, setIsEditing] = useState(block.type === BlockTypes.CUSTOM_TEXT && block.content.includes('Enter your custom instruction')); // Start editing if it's a new custom block\n  const [editedContent, setEditedContent] = useState(block.content);\n  const textareaRef = useRef(null); // Ref for the textarea\n\n  const {\n    attributes,\n    listeners,\n    setNodeRef,\n    transform,\n    transition,\n    isDragging: isSortableDragging // Renamed to avoid conflict\n  } = useSortable({\n    id: id\n  });\n\n  // Combine isDragging props if needed\n  const currentlyDragging = isDragging || isSortableDragging;\n  const style = {\n    transform: CSS.Transform.toString(transform),\n    transition: transition || undefined,\n    // Ensure transition is not null\n    opacity: isOpacityReduced ? 0.5 : 1,\n    cursor: currentlyDragging ? 'grabbing' : 'grab',\n    zIndex: currentlyDragging ? 10 : 'auto' // Bring dragged item to front\n  };\n\n  // --- Edit Handling ---\n  const handleEditClick = () => {\n    setEditedContent(block.content); // Reset edit buffer to current content\n    setIsEditing(true);\n  };\n  const handleSaveEdit = () => {\n    if (editedContent.trim() !== block.content) {\n      onUpdateBlockContent(id, editedContent.trim());\n    }\n    setIsEditing(false);\n  };\n  const handleCancelEdit = () => {\n    setEditedContent(block.content); // Revert changes\n    setIsEditing(false);\n  };\n  const handleContentChange = e => {\n    setEditedContent(e.target.value);\n    // Auto-resize textarea\n    if (textareaRef.current) {\n      textareaRef.current.style.height = 'auto'; // Reset height\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\n    }\n  };\n\n  // Auto-focus and resize textarea when editing starts\n  useEffect(() => {\n    if (isEditing && textareaRef.current) {\n      textareaRef.current.focus();\n      textareaRef.current.select(); // Select text for easy replacement\n      // Adjust height initially and in case content was loaded\n      textareaRef.current.style.height = 'auto';\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\n    }\n  }, [isEditing]);\n\n  // Determine block type for styling/iconography\n  const getBlockIcon = () => {\n    var _block$title, _block$title2, _block$title3, _block$title4, _block$title5, _block$title6, _block$title7;\n    switch (block.type) {\n      case BlockTypes.MATERIAL_SUMMARY:\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          title: \"Material Summary\",\n          children: \"\\uD83D\\uDCC4\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 54\n        }, this);\n      case BlockTypes.CUSTOM_TEXT:\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          title: \"Custom Text\",\n          children: \"\\u270F\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 49\n        }, this);\n      case BlockTypes.PALETTE_ITEM: // Should be CANVAS_BLOCK on canvas\n      case BlockTypes.CANVAS_BLOCK:\n        // Heuristic for icons based on title/content\n        if ((_block$title = block.title) !== null && _block$title !== void 0 && _block$title.includes('Task')) return /*#__PURE__*/_jsxDEV(\"span\", {\n          title: block.title,\n          children: \"\\uD83C\\uDFAF\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 59\n        }, this);\n        if ((_block$title2 = block.title) !== null && _block$title2 !== void 0 && _block$title2.includes('Tone')) return /*#__PURE__*/_jsxDEV(\"span\", {\n          title: block.title,\n          children: \"\\uD83D\\uDDE3\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 59\n        }, this);\n        if ((_block$title3 = block.title) !== null && _block$title3 !== void 0 && _block$title3.includes('Context')) return /*#__PURE__*/_jsxDEV(\"span\", {\n          title: block.title,\n          children: \"\\uD83D\\uDCDA\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 62\n        }, this);\n        if ((_block$title4 = block.title) !== null && _block$title4 !== void 0 && _block$title4.includes('Guiding') || (_block$title5 = block.title) !== null && _block$title5 !== void 0 && _block$title5.includes('Step')) return /*#__PURE__*/_jsxDEV(\"span\", {\n          title: block.title,\n          children: \"\\u2753\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 95\n        }, this);\n        if ((_block$title6 = block.title) !== null && _block$title6 !== void 0 && _block$title6.includes('Example')) return /*#__PURE__*/_jsxDEV(\"span\", {\n          title: block.title,\n          children: \"\\u2705\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 62\n        }, this);\n        if ((_block$title7 = block.title) !== null && _block$title7 !== void 0 && _block$title7.includes('Safety')) return /*#__PURE__*/_jsxDEV(\"span\", {\n          title: block.title,\n          children: \"\\uD83D\\uDEE1\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 61\n        }, this);\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          title: \"Instruction\",\n          children: \"\\u2699\\uFE0F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 24\n        }, this);\n      // Default instruction icon\n      default:\n        return /*#__PURE__*/_jsxDEV(\"span\", {\n          title: \"Block\",\n          children: \"\\uD83E\\uDDF1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 29\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: setNodeRef,\n    style: style,\n    className: `canvas-block ${currentlyDragging ? 'dragging' : ''} type-${block.type || 'default'}`,\n    children: [!isEditing && /*#__PURE__*/_jsxDEV(\"button\", {\n      ...attributes,\n      ...listeners,\n      className: \"drag-handle subtle-button\",\n      title: \"Drag to reorder\",\n      children: /*#__PURE__*/_jsxDEV(FaGripVertical, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"block-content-area\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"block-header\",\n        children: [getBlockIcon(), /*#__PURE__*/_jsxDEV(\"strong\", {\n          children: block.title || 'Instruction Block'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 18\n      }, this), isEditing ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n        ref: textareaRef,\n        value: editedContent,\n        onChange: handleContentChange,\n        onBlur: handleSaveEdit // Save when focus is lost\n        ,\n        rows: 3 // Start with a few rows\n        ,\n        className: \"block-textarea\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"block-text\",\n        onDoubleClick: block.type === BlockTypes.CUSTOM_TEXT ? handleEditClick : undefined,\n        children: [block.content, block.type === BlockTypes.CUSTOM_TEXT && /*#__PURE__*/_jsxDEV(FaEdit, {\n          className: \"edit-hint-icon\",\n          title: \"Double-click to edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 68\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"block-actions\",\n      children: isEditing ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSaveEdit,\n          className: \"action-button save subtle-button\",\n          title: \"Save changes\",\n          children: /*#__PURE__*/_jsxDEV(FaCheck, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleCancelEdit,\n          className: \"action-button cancel subtle-button\",\n          title: \"Cancel edit\",\n          children: /*#__PURE__*/_jsxDEV(FaTimes, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [block.type === BlockTypes.CUSTOM_TEXT && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleEditClick,\n          className: \"action-button edit subtle-button\",\n          title: \"Edit content\",\n          children: /*#__PURE__*/_jsxDEV(FaEdit, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 30\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onDeleteBlock(id),\n          className: \"action-button delete subtle-button\",\n          title: \"Delete block\",\n          children: /*#__PURE__*/_jsxDEV(FaTrash, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 9\n  }, this);\n}\n_s(SortableBlock, \"RN4p1ZcDH65dToSjBonpb/10Ugg=\", false, function () {\n  return [useSortable];\n});\n_c = SortableBlock;\nexport default SortableBlock;\nvar _c;\n$RefreshReg$(_c, \"SortableBlock\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useSortable","CSS","FaGripVertical","FaTrash","FaEdit","FaCheck","FaTimes","BlockTypes","jsxDEV","_jsxDEV","Fragment","_Fragment","SortableBlock","id","block","onDeleteBlock","onUpdateBlockContent","isDragging","isOpacityReduced","_s","isEditing","setIsEditing","type","CUSTOM_TEXT","content","includes","editedContent","setEditedContent","textareaRef","attributes","listeners","setNodeRef","transform","transition","isSortableDragging","currentlyDragging","style","Transform","toString","undefined","opacity","cursor","zIndex","handleEditClick","handleSaveEdit","trim","handleCancelEdit","handleContentChange","e","target","value","current","height","scrollHeight","focus","select","getBlockIcon","_block$title","_block$title2","_block$title3","_block$title4","_block$title5","_block$title6","_block$title7","MATERIAL_SUMMARY","title","children","fileName","_jsxFileName","lineNumber","columnNumber","PALETTE_ITEM","CANVAS_BLOCK","ref","className","onChange","onBlur","rows","onDoubleClick","onClick","_c","$RefreshReg$"],"sources":["/Users/tommys/Desktop/ai14/frontend/src/components/Dashboard/PromptBuilder/SortableBlock.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useSortable } from '@dnd-kit/sortable';\nimport { CSS } from '@dnd-kit/utilities';\nimport { FaGripVertical, FaTrash, FaEdit, FaCheck, FaTimes } from 'react-icons/fa'; // Icons\nimport { BlockTypes } from '../PromptWorkshop'; // Import BlockTypes\nimport '../../../styles/PromptWorkshop.css'; // Ensure CSS is created/updated\n\nfunction SortableBlock({ id, block, onDeleteBlock, onUpdateBlockContent, isDragging, isOpacityReduced }) {\n    const [isEditing, setIsEditing] = useState(block.type === BlockTypes.CUSTOM_TEXT && block.content.includes('Enter your custom instruction')); // Start editing if it's a new custom block\n    const [editedContent, setEditedContent] = useState(block.content);\n    const textareaRef = useRef(null); // Ref for the textarea\n\n    const {\n        attributes,\n        listeners,\n        setNodeRef,\n        transform,\n        transition,\n        isDragging: isSortableDragging // Renamed to avoid conflict\n    } = useSortable({ id: id });\n\n    // Combine isDragging props if needed\n    const currentlyDragging = isDragging || isSortableDragging;\n\n    const style = {\n        transform: CSS.Transform.toString(transform),\n        transition: transition || undefined, // Ensure transition is not null\n        opacity: isOpacityReduced ? 0.5 : 1,\n        cursor: currentlyDragging ? 'grabbing' : 'grab',\n        zIndex: currentlyDragging ? 10 : 'auto', // Bring dragged item to front\n    };\n\n    // --- Edit Handling ---\n    const handleEditClick = () => {\n        setEditedContent(block.content); // Reset edit buffer to current content\n        setIsEditing(true);\n    };\n\n    const handleSaveEdit = () => {\n        if (editedContent.trim() !== block.content) {\n            onUpdateBlockContent(id, editedContent.trim());\n        }\n        setIsEditing(false);\n    };\n\n    const handleCancelEdit = () => {\n        setEditedContent(block.content); // Revert changes\n        setIsEditing(false);\n    };\n\n    const handleContentChange = (e) => {\n        setEditedContent(e.target.value);\n        // Auto-resize textarea\n        if (textareaRef.current) {\n            textareaRef.current.style.height = 'auto'; // Reset height\n            textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\n        }\n    };\n\n     // Auto-focus and resize textarea when editing starts\n    useEffect(() => {\n        if (isEditing && textareaRef.current) {\n            textareaRef.current.focus();\n            textareaRef.current.select(); // Select text for easy replacement\n             // Adjust height initially and in case content was loaded\n            textareaRef.current.style.height = 'auto';\n            textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`;\n        }\n    }, [isEditing]);\n\n\n    // Determine block type for styling/iconography\n    const getBlockIcon = () => {\n        switch(block.type) {\n            case BlockTypes.MATERIAL_SUMMARY: return <span title=\"Material Summary\">üìÑ</span>;\n            case BlockTypes.CUSTOM_TEXT: return <span title=\"Custom Text\">‚úèÔ∏è</span>;\n            case BlockTypes.PALETTE_ITEM: // Should be CANVAS_BLOCK on canvas\n            case BlockTypes.CANVAS_BLOCK:\n                 // Heuristic for icons based on title/content\n                if (block.title?.includes('Task')) return <span title={block.title}>üéØ</span>;\n                if (block.title?.includes('Tone')) return <span title={block.title}>üó£Ô∏è</span>;\n                if (block.title?.includes('Context')) return <span title={block.title}>üìö</span>;\n                if (block.title?.includes('Guiding') || block.title?.includes('Step')) return <span title={block.title}>‚ùì</span>;\n                if (block.title?.includes('Example')) return <span title={block.title}>‚úÖ</span>;\n                if (block.title?.includes('Safety')) return <span title={block.title}>üõ°Ô∏è</span>;\n                return <span title=\"Instruction\">‚öôÔ∏è</span>; // Default instruction icon\n            default: return <span title=\"Block\">üß±</span>;\n        }\n    };\n\n    return (\n        <div ref={setNodeRef} style={style} className={`canvas-block ${currentlyDragging ? 'dragging' : ''} type-${block.type || 'default'}`}>\n             {/* Drag Handle (only visible when not editing) */}\n            {!isEditing && (\n                <button {...attributes} {...listeners} className=\"drag-handle subtle-button\" title=\"Drag to reorder\">\n                    <FaGripVertical />\n                </button>\n            )}\n\n            <div className=\"block-content-area\">\n                 <div className=\"block-header\">\n                    {getBlockIcon()}\n                    <strong>{block.title || 'Instruction Block'}</strong>\n                 </div>\n                {isEditing ? (\n                    <textarea\n                        ref={textareaRef}\n                        value={editedContent}\n                        onChange={handleContentChange}\n                        onBlur={handleSaveEdit} // Save when focus is lost\n                        rows={3} // Start with a few rows\n                        className=\"block-textarea\"\n                    />\n                ) : (\n                    <p className=\"block-text\" onDoubleClick={block.type === BlockTypes.CUSTOM_TEXT ? handleEditClick : undefined}>\n                         {block.content}\n                         {block.type === BlockTypes.CUSTOM_TEXT && <FaEdit className=\"edit-hint-icon\" title=\"Double-click to edit\"/>}\n                    </p>\n                )}\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"block-actions\">\n                {isEditing ? (\n                    <>\n                        <button onClick={handleSaveEdit} className=\"action-button save subtle-button\" title=\"Save changes\">\n                            <FaCheck />\n                        </button>\n                        <button onClick={handleCancelEdit} className=\"action-button cancel subtle-button\" title=\"Cancel edit\">\n                            <FaTimes />\n                        </button>\n                    </>\n                ) : (\n                    <>\n                     {/* Allow editing for custom text blocks */}\n                     {block.type === BlockTypes.CUSTOM_TEXT && (\n                        <button onClick={handleEditClick} className=\"action-button edit subtle-button\" title=\"Edit content\">\n                             <FaEdit />\n                         </button>\n                     )}\n                        <button onClick={() => onDeleteBlock(id)} className=\"action-button delete subtle-button\" title=\"Delete block\">\n                            <FaTrash />\n                        </button>\n                    </>\n                )}\n            </div>\n        </div>\n    );\n}\n\nexport default SortableBlock;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}